<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="history"> <!-- contents render, but this div disappears -->
    <div class="h2 media-heading pale">Transaction History</div>

    <div class="well well-sm">

        <div>
            See your history with
            <select>
                <option th:each="user : ${users}" th:text="${user.userName}" th:if="${user.id} != ${currentUser.id}"></option>
            </select>
        </div>

        <table class="table table-striped">
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Balance</th>
            </tr>
            <tr th:each="transaction : ${history.transactions}" th:include="history :: record" th:if="${transaction.Display()}" class="transaction"></tr>

        </table>

    </div>

    <p class="label label-info"><a href="#">Show All</a></p>

</div>

<tr th:fragment="record">
    <td th:text="${#dates.format(transaction.GetJavaDate(), 'MM/dd/yyyy')}"></td>
    <td th:text="${transaction.description}"></td>
    <td th:inline="text" th:classappend="${transaction.isDebt} ? 'debt' : 'credit'">$ [[${#numbers.formatDecimal(transaction.amount, 0, 'COMMA', 2, 'POINT')}]]</td>
    <td th:inline="text" th:classappend="${transaction.runningTotal} > 0 ? 'debt' : 'credit'">$ [[${#numbers.formatDecimal(transaction.runningTotal, 0, 'COMMA', 2, 'POINT')}]]</td>
</tr>

</body>
</html>